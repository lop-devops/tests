include tests-shared.cfg
username = root
password = 123456
main_vm = avocado-vt-vm1
vms = avocado-vt-vm1
#Network
nettype = bridge
netdst=virbr0
# Using Text mode of installation
display = 'nographic'
take_regular_screendumps = no
keep_screendumps_on_error = no
keep_screendumps = no
store_vm_register = no
virt_install_binary = /usr/bin/virt-install
qemu_img_binary = /usr/bin/qemu-img
qemu_binary = /usr/bin/qemu-system-ppc64
emulator_path = /usr/bin/qemu-system-ppc64
use_os_variant=yes
hvm_or_pv = hvm
machine_type = pseries
only bridge
no xen, lxc, esx, ovmf
#Filterout unwanted disk types
no ide,xenblk,lsi_scsi,ahci,sd
no qed,qcow2v3,raw_dd,vmdk, usb2
no e1000-82540em,e1000-82545em,e1000-82544gc,xennet,nic_custom
only no_virtio_rng
only smp2
only no_9p_export
only no_pci_assignable
only (image_backend=filesystem)
only smallpages
smp = 32
vcpu = 32
vcpu_cores = 32
vcpu_threads = 1
vcpu_sockets = 1
align_mem_values = "yes"

variants:
    - guest_import_32G:
        #Guest with 32G Memory
        mem = 32768
        only unattended_install.import.import.default_install.aio_native
        
    - guest_memfreecell:
        only virsh.freecell.libvirton.expected_options.no_option,virsh.freecell.libvirton.expected_options.expected_option_all,virsh.freecell.libvirton.expected_options.expected_args_0,virsh.freecell.libvirtoff.expected_options.no_option,virsh.freecell.libvirtoff.expected_options.expected_option_all,virsh.freecell.libvirtoff.expected_options.expected_args_0

    - guest_memguest_numa:
        only guest_numa.possitive_test.no_hugepage.no_mem_backend.topology.no_numatune_memnode.numatune_mem,guest_numa.possitive_test.no_hugepage.no_mem_backend.no_topo.no_numatune_memnode.numatune_mem,guest_numa.possitive_test.no_hugepage.mem_backend.topology.no_numatune_memnode.no_numatune_mem,guest_numa.possitive_test.no_hugepage.mem_backend.topology.numatune_memnode.m_strict.numatune_mem,guest_numa.possitive_test.no_hugepage.mem_backend.topology.numatune_memnode.m_preferred.numatune_mem,guest_numa.possitive_test.no_hugepage.mem_backend.topology.numatune_memnode.m_interleave.numatune_mem,guest_numa.possitive_test.no_hugepage.mem_backend.no_topo.no_numatune_memnode.no_numatune_mem,guest_numa.possitive_test.no_hugepage.mem_backend.no_topo.numatune_memnode.m_strict.no_numatune_mem,guest_numa.possitive_test.no_hugepage.mem_backend.no_topo.numatune_memnode.m_preferred.numatune_mem,guest_numa.possitive_test.no_hugepage.mem_backend.no_topo.numatune_memnode.m_preferred.no_numatune_mem,guest_numa.possitive_test.no_hugepage.mem_backend.no_topo.numatune_memnode.m_interleave.numatune_mem,guest_numa.possitive_test.no_hugepage.mem_backend.no_topo.numatune_memnode.m_interleave.no_numatune_mem,guest_numa.possitive_test.hugepage.per_node.2M.topology.no_numatune_memnode.numatune_mem,guest_numa.possitive_test.hugepage.per_node.2M.topology.no_numatune_memnode.no_numatune_mem,guest_numa.possitive_test.hugepage.per_node.2M.no_topo.no_numatune_memnode.numatune_mem,guest_numa.possitive_test.hugepage.per_node.2M.no_topo.no_numatune_memnode.no_numatune_mem,guest_numa.possitive_test.hugepage.per_node.1G.topology.no_numatune_memnode.numatune_mem,guest_numa.possitive_test.hugepage.per_node.1G.topology.no_numatune_memnode.no_numatune_mem,guest_numa.possitive_test.hugepage.per_node.1G.no_topo.no_numatune_memnode.numatune_mem,guest_numa.possitive_test.hugepage.per_node.1G.no_topo.no_numatune_memnode.no_numatune_mem,guest_numa.possitive_test.hugepage.host_total.topology.no_numatune_memnode.numatune_mem,guest_numa.possitive_test.hugepage.host_total.topology.no_numatune_memnode.no_numatune_mem,guest_numa.possitive_test.hugepage.host_total.no_topo.no_numatune_memnode.numatune_mem,guest_numa.possitive_test.hugepage.host_total.no_topo.no_numatune_memnode.no_numatune_mem,guest_numa.misc_test.vcpu_fill.set_to,guest_numa.misc_test.vcpu_fill.set_not_to

    - guest_numa_memory:
        only numa_memory.possitive_test.no_vcpu.mem_auto.strict,numa_memory.possitive_test.no_vcpu.mem_auto.interleave,numa_memory.possitive_test.no_vcpu.mem_nodeset.node1.strict,numa_memory.possitive_test.no_vcpu.mem_nodeset.node1.preferred,numa_memory.possitive_test.vcpu.vcpu_auto.mem_auto.strict,numa_memory.possitive_test.vcpu.vcpu_auto.mem_auto.interleave,numa_memory.possitive_test.vcpu.vcpu_auto.mem_nodeset.node1.strict,numa_memory.possitive_test.vcpu.vcpu_auto.mem_nodeset.node1.preferred,numa_memory.possitive_test.vcpu.vcpu_static.mem_auto.strict,numa_memory.possitive_test.vcpu.vcpu_static.mem_auto.interleave,numa_memory.possitive_test.vcpu.vcpu_static.mem_nodeset.node1.strict,numa_memory.possitive_test.vcpu.vcpu_static.mem_nodeset.node1.preferred

    - guest_remove_32G:
        only remove_guest.without_disk
        
    - guest_import_4G:
        #Guest with 4G Memory
        mem = 4096
        only unattended_install.import.import.default_install.aio_native

    - guest_memhotplug:
        only libvirt_mem.positive_test.mem_basic.cold_plug_discard,libvirt_mem.positive_test.mem_basic.discard
        no libvirt_mem.positive_test.memory.hot.plug.default,libvirt_mem.positive_test.memory.hot.plug.max_slots.without_reboot,libvirt_mem.positive_test.memory.hot.plug.max_slots.with_rand_reboot,libvirt_mem.positive_test.memory.hot.unplug.default,libvirt_mem.positive_test.memory.hot.unplug.max_slots.without_reboot,libvirt_mem.positive_test.memory.hot.unplug.max_slots.with_rand_reboot,libvirt_mem.positive_test.memory.cold.plug.default,libvirt_mem.positive_test.memory.cold.plug.max_slots.without_reboot,libvirt_mem.positive_test.memory.cold.plug.max_slots.with_rand_reboot,libvirt_mem.positive_test.memory.cold.unplug.default,libvirt_mem.positive_test.without_numa_save_restore
    - guest_memhotplug_hugepages:
        max_mem_rt = 5242880
        max_mem = "2097152"
        current_mem = "2097152"
        target_hugepages = 5200
        # all the below tests are P1, but all of them are failing, hence making them no for now, these tests needs to be fixed and then executed
        no libvirt_mem.positive_test.hugepages.no_numatune.hot_plug,libvirt_mem.positive_test.hugepages.no_numatune.hot_unplug,libvirt_mem.positive_test.hugepages.no_numatune.cold_plug,libvirt_mem.positive_test.hugepages.no_numatune.cold_plug_discard,libvirt_mem.positive_test.hugepages.no_numatune.discard,libvirt_mem.positive_test.hugepages.with_numatune.hot_plug,libvirt_mem.positive_test.hugepages.with_numatune.hot_unplug,libvirt_mem.positive_test.hugepages.with_numatune.cold_plug,libvirt_mem.positive_test.hugepages.with_numatune.cold_plug_discard

    - guest_setmem:
        only virsh.setmem.valid_options.running.half_mem.domid.dom_arg_size_arg.no_cmd_flag,virsh.setmem.valid_options.running.half_mem.domid.dom_arg_size_arg.cmd_flag_live,virsh.setmem.valid_options.running.half_mem.domid.dom_arg_size_arg.cmd_flag_current.manipulate_action.none.no_action,virsh.setmem.valid_options.running.half_mem.domid.dom_opt_size_opt.no_cmd_flag,virsh.setmem.valid_options.running.half_mem.domid.dom_opt_size_opt.cmd_flag_live,virsh.setmem.valid_options.running.half_mem.domid.dom_opt_size_opt.cmd_flag_current.manipulate_action.none.no_action,virsh.setmem.valid_options.running.half_mem.domname.dom_arg_size_arg.no_cmd_flag,virsh.setmem.valid_options.running.half_mem.domname.dom_arg_size_arg.cmd_flag_live,virsh.setmem.valid_options.running.half_mem.domname.dom_arg_size_arg.cmd_flag_current.manipulate_action.none.no_action,virsh.setmem.valid_options.running.half_mem.domname.dom_opt_size_opt.no_cmd_flag,virsh.setmem.valid_options.running.half_mem.domname.dom_opt_size_opt.cmd_flag_live,virsh.setmem.valid_options.running.half_mem.domname.dom_opt_size_opt.cmd_flag_current.manipulate_action.none.no_action,virsh.setmem.valid_options.running.half_mem.domuuid.dom_arg_size_arg.no_cmd_flag,virsh.setmem.valid_options.running.half_mem.domuuid.dom_arg_size_arg.cmd_flag_live,virsh.setmem.valid_options.running.half_mem.domuuid.dom_arg_size_arg.cmd_flag_current.manipulate_action.none.no_action,virsh.setmem.valid_options.running.half_mem.domuuid.dom_opt_size_opt.no_cmd_flag,virsh.setmem.valid_options.running.half_mem.domuuid.dom_opt_size_opt.cmd_flag_live,virsh.setmem.valid_options.running.half_mem.domuuid.dom_opt_size_opt.cmd_flag_current.manipulate_action.none.no_action,virsh.setmem.valid_options.running.same_mem.domid.dom_arg_size_arg.no_cmd_flag,virsh.setmem.valid_options.running.same_mem.domid.dom_arg_size_arg.cmd_flag_live,virsh.setmem.valid_options.running.same_mem.domid.dom_arg_size_arg.cmd_flag_current.manipulate_action.none.no_action,virsh.setmem.valid_options.running.same_mem.domid.dom_opt_size_opt.no_cmd_flag,virsh.setmem.valid_options.running.same_mem.domid.dom_opt_size_opt.cmd_flag_live,virsh.setmem.valid_options.running.same_mem.domid.dom_opt_size_opt.cmd_flag_current.manipulate_action.none.no_action,virsh.setmem.valid_options.running.same_mem.domname.dom_arg_size_arg.no_cmd_flag,virsh.setmem.valid_options.running.same_mem.domname.dom_arg_size_arg.cmd_flag_live,virsh.setmem.valid_options.running.same_mem.domname.dom_arg_size_arg.cmd_flag_current.manipulate_action.none.no_action,virsh.setmem.valid_options.running.same_mem.domname.dom_opt_size_opt.no_cmd_flag,virsh.setmem.valid_options.running.same_mem.domname.dom_opt_size_opt.cmd_flag_live,virsh.setmem.valid_options.running.same_mem.domname.dom_opt_size_opt.cmd_flag_current.manipulate_action.none.no_action,virsh.setmem.valid_options.running.same_mem.domuuid.dom_arg_size_arg.no_cmd_flag,virsh.setmem.valid_options.running.same_mem.domuuid.dom_arg_size_arg.cmd_flag_live,virsh.setmem.valid_options.running.same_mem.domuuid.dom_arg_size_arg.cmd_flag_current.manipulate_action.none.no_action,virsh.setmem.valid_options.running.same_mem.domuuid.dom_opt_size_opt.no_cmd_flag,virsh.setmem.valid_options.running.same_mem.domuuid.dom_opt_size_opt.cmd_flag_live,virsh.setmem.valid_options.running.same_mem.domuuid.dom_opt_size_opt.cmd_flag_current.manipulate_action.none.no_action,virsh.setmem.memballoon_option.none_model
        no virsh.setmem.valid_options.inactive.half_mem.domname.dom_arg_size_arg.cmd_flag_config,virsh.setmem.valid_options.running.half_mem.domname.dom_arg_size_arg.cmd_flag_current.manipulate_action.save.before_setmem,virsh.setmem.valid_options.running.half_mem.domname.dom_arg_size_arg.cmd_flag_current.manipulate_action.save.after_setmem,virsh.setmem.valid_options.running.half_mem.domname.dom_arg_size_arg.cmd_flag_current.manipulate_action.managedsave.before_setmem,virsh.setmem.valid_options.running.half_mem.domname.dom_arg_size_arg.cmd_flag_current.manipulate_action.managedsave.after_setmem,virsh.setmem.valid_options.running.same_mem.domname.dom_arg_size_arg.cmd_flag_current.manipulate_action.save.before_setmem,virsh.setmem.valid_options.running.same_mem.domname.dom_arg_size_arg.cmd_flag_current.manipulate_action.save.after_setmem,virsh.setmem.valid_options.running.same_mem.domname.dom_arg_size_arg.cmd_flag_current.manipulate_action.managedsave.before_setmem,virsh.setmem.valid_options.running.same_mem.domname.dom_arg_size_arg.cmd_flag_current.manipulate_action.managedsave.after_setmem
        
    - guest_numa_preferred_undefine:
        only numa_preferred_undefine.default

    - guest_dommemstat:
        only virsh.dommemstat.normal_test.paused_option

    - guest_libvirt_hooks:
        only libvirt_hooks.vm.start_stop,libvirt_hooks.vm.libvirtd_t,libvirt_hooks.vm.scale_test
        no libvirt_hooks.vm.save_restore.basic_test,libvirt_hooks.vm.managedsave_t.basic_test
        
    - guest_hugepage:
        only libvirt_hugepage.normal.with_mb.trans_enable.static_nonzero.umount_hugetlbfs
        no libvirt_hugepage.normal.with_mb.trans_enable.static_nonzero.mount_hugetlbfs,libvirt_hugepage.stress.with_mb.trans_enable.static_nonzero.mount_hugetlbfs,libvirt_hugepage.unixbench.with_mb.trans_enable.static_nonzero.mount_hugetlbfs,libvirt_hugepage.unixbench.with_mb.trans_disable.static_nonzero.mount_hugetlbfs
        
    - guest_remove_4G:
        only remove_guest.without_disk
