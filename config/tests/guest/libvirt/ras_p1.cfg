include tests-shared.cfg

# Basic VM credentials and identification
username = root
password = 123456
main_vm = avocado-vt-vm1
vms = avocado-vt-vm1

#Network
nettype = bridge
netdst=virbr0

# Using Text mode of installation
display = 'nographic'

take_regular_screendumps = no
keep_screendumps_on_error = no
keep_screendumps = no
store_vm_register = no

# Binaries path
virt_install_binary = /usr/bin/virt-install
qemu_img_binary = /usr/bin/qemu-img
qemu_binary = /usr/bin/qemu-system-ppc64
emulator_path = /usr/bin/qemu-system-ppc64

# VM settings
use_os_variant=yes
hvm_or_pv = hvm
machine_type = pseries
only bridge
no xen, lxc, esx, ovmf

#Filterout unwanted disk types
no ide,xenblk,lsi_scsi,ahci,sd
no qed,qcow2v3,raw_dd,vmdk, usb2
no e1000-82540em,e1000-82545em,e1000-82544gc,xennet,nic_custom
only no_virtio_rng
only smp2
only no_9p_export
only no_pci_assignable
only (image_backend=filesystem)
only smallpages

# CPU and Memory
smp = 32
vcpu_cores = 32
vcpu_threads = 1
vcpu_sockets = 1
mem = 32768

# Test Variants
variants:
    - guest_import:
        only unattended_install.import.import.default_install.aio_native

    - guest_ras:
        variants:
            # virsh dump tests with no crash utility
            - virsh_dump.positive_test:
                only virsh.dump.positive_test.non_acl.no_option
            - virsh_dump.positive_test:
                only virsh.dump.positive_test.non_acl.pause_dump.crash
            - virsh_dump.positive_test:
                only virsh.dump.positive_test.non_acl.pause_dump.reset
            - virsh_dump.positive_test:
                only virsh.dump.positive_test.non_acl.crash_dump
            - virsh_dump.positive_test:
                only virsh.dump.positive_test.non_acl.reset_dump
            - virsh_dump.positive_test:
                only virsh.dump.positive_test.non_acl.lzop_format_dump
            - virsh_dump.positive_test:
                only virsh.dump.positive_test.non_acl.gzip_format_dump
            - virsh_dump.positive_test:
                only virsh.dump.positive_test.non_acl.bzip2_format_dump
            - virsh_dump.positive_test:
                only virsh.dump.positive_test.non_acl.xz_format_dump

            # virsh dump tests with crash utility
            - virsh_dump.crash_utility_tests:
                only virsh.dump.crash_utility_tests.memory_dump.elf_format
            - virsh_dump.crash_utility_tests:
                only virsh.dump.crash_utility_tests.memory_dump.kdump-zlib_format
            - virsh_dump.crash_utility_tests:
                only virsh.dump.crash_utility_tests.memory_dump.kdump-lzo_format
            - virsh_dump.crash_utility_tests:
                only virsh.dump.crash_utility_tests.memory_dump.kdump-snappy_format
            - virsh_dump.crash_utility_tests:
                only virsh.dump.crash_utility_tests.memory_crash_dump
            - virsh_dump.crash_utility_tests:
                only virsh.dump.crash_utility_tests.memory_bypass_cache_dump
            
            # guest kdump tests
            - guest_kdump:
                only guest_kernel_debugging.guest_kdump.kdump_no_stress
            - guest_kdump:
                only guest_kernel_debugging.guest_kdump.kdump_with_stress_crash_utility
            - guest_kdump:
                only guest_kernel_debugging.guest_kdump.two_guests_kdump_no_stress
            - guest_kdump:
                only guest_kernel_debugging.guest_kdump.two_guests_kdump_with_stress_crash_utility

    - guest_remove:
        only remove_guest.without_disk
